(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{148:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("p",[s._v("印刷や画面上での表示に向いた静的な地図の作成方法と、ウェブベースでのインタラクティブな操作が可能な空間データのマッピングについて学びます。")]),s._v(" "),t("p",[s._v("まず、Rの標準作図機能による地図の作成を行います。次にggplot2パッケージによる例を紹介します。")]),s._v(" "),t("p",[s._v("データ操作や処理を行うので、")]),s._v(" "),t("p",[s._v("前章を先に読んでいてください。")]),s._v(" "),t("p",[s._v("空間データは3次元構造を持っており、関心のある地物に近づくための拡大や、対して距離をとる縮小があります。")]),s._v(" "),t("h2",{attrs:{id:"利用するデータ、パッケージ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#利用するデータ、パッケージ","aria-hidden":"true"}},[s._v("#")]),s._v(" 利用するデータ、パッケージ")]),s._v(" "),t("p",[s._v("この章では")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibrary"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dplyr"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibrary"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ggplot2"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jpndistrict"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nsf_pref_33 "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  jpn_pref"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("33")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" district "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("TRUE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("glimpse"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref_33"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('## Observations: 30\n## Variables: 5\n## $ pref_code  <chr> "33", "33", "33", "33", "33", "33", "33", "33", "33...\n## $ prefecture <chr> "岡山県", "岡山県", "岡山県", "岡山県", "岡山県", "岡山県", "岡山県", "岡...\n## $ city_code  <chr> "33101", "33102", "33103", "33104", "33202", "33203...\n## $ city       <chr> "岡山市 北区", "岡山市 中区", "岡山市 東区", "岡山市 南区", "倉敷市", "津山市...\n## $ geometry   <GEOMETRY [°]> POLYGON ((133.9098 34.948, ..., MULTIPOLYG...\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"base"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base","aria-hidden":"true"}},[s._v("#")]),s._v(" base")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("plot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref_33"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-5-1.png",alt:"plot of chunk unnamed-chunk-5"}})]),s._v(" "),t("p",[s._v("sfオブジェクトに対して"),t("code",[s._v("plot()")]),s._v("を適用した場合、デフォルトでは全ての属性について作図を行います。")]),s._v(" "),t("p",[s._v("そのため、地物の形状あるいは特定の属性について確認したい際には次のようにします。"),t("code",[s._v("[")]),s._v("演算子で対象の属性を含む列を指定するか、"),t("code",[s._v("st_geometry()")]),s._v("を使います。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("sf_pref_33 "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  st_geometry"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  plot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"white"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-6-1.png",alt:"plot of chunk unnamed-chunk-6"}})]),s._v(" "),t("p",[t("code",[s._v("options(sf_max.plot =)")]),s._v("で描画される数を制御することも可能です。これによりセッションが終了するまで設定を維持できます。ただし、この設定が予期せぬ結果を招くこともあるので、描画対象は都度指定するようにした方が良いでしょう。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("options"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_max.plot "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("3")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nsf_pref_33 "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  plot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-7-1.png",alt:"plot of chunk unnamed-chunk-7"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("sf_pref_33"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"city"')]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  plot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-8-1.png",alt:"plot of chunk unnamed-chunk-8"}})]),s._v(" "),t("p",[s._v("ここで日本語が文字化けする時には")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("par"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("family "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"IPAexGothic"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    oma "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("3")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("3")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("3")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("6.5")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    mar "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nsf_pref_33"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"city"')]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  plot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-9-1.png",alt:"plot of chunk unnamed-chunk-9"}})]),s._v(" "),t("p",[s._v("凡例は標準で図の右側に配置されますが、これは"),t("code",[s._v("key.pos")]),s._v("引数で位置を調整できます。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("sf_pref_33"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"city"')]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  plot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key.pos "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('""')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## Error in switch(key.pos, layout(matrix(c(2, 1), nrow = 2, ncol = 1), widths = 1, : numeric EXPR required for 'switch' without named alternatives\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"ggplot2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ggplot2","aria-hidden":"true"}},[s._v("#")]),s._v(" ggplot2")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("ggplot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  geom_sf"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" sf_pref_33"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" aes"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fill "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" city_code"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  "),t("span",{attrs:{class:"token comment"}},[s._v("# 経緯度線を描画しない")]),s._v("\n  coord_sf"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("datum "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("NA")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  guides"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fill "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("FALSE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  "),t("span",{attrs:{class:"token comment"}},[s._v("# 背景色を白にする")]),s._v("\n  theme_void"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-11-1.png",alt:"plot of chunk unnamed-chunk-11"}})]),s._v(" "),t("h3",{attrs:{id:"tmapによる主題図作成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tmapによる主題図作成","aria-hidden":"true"}},[s._v("#")]),s._v(" tmapによる主題図作成")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# 文字化け対策")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tmap"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nsf_pref33 "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  jpn_pref"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("33")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" district "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("TRUE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("qtm"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref33"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-14-1.png",alt:"plot of chunk unnamed-chunk-14"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("tm_shape"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref33"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n         projection "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"longlat"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" \n    tm_polygons"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-15-1.png",alt:"plot of chunk unnamed-chunk-15"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("tmap_mode"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"view"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## tmap mode set to interactive viewing\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("tm_shape"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref33"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" \n  tm_fill"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"city_code"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" palette "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" sf.colors"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("20")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-16-1.png",alt:"plot of chunk unnamed-chunk-16"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("qtm"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref33"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-17-1.png",alt:"plot of chunk unnamed-chunk-17"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("tm_shape"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref33"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  tm_polygons"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"city"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              title "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('""')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              size "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n              bg.color "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"white"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n              border.col "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"gray50"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n              border.alpha "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v(".5")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              bg.alpha "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.25")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              outer.margins "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  tm_legend"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("position "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"right"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"bottom"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n            inner.margins "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.05")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.01")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.05")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n  tm_layout"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("frame "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("FALSE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n            title "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"岡山県"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            fontfamily "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"IPAexGothic"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## legend.postion is used for plot mode. Use view.legend.position in tm_view to set the legend position in view mode.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-17-2.png",alt:"plot of chunk unnamed-chunk-17"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("estatapi"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconf "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" config"),t("span",{attrs:{class:"token operator"}},[s._v("::")]),s._v("get"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nd2 "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  estat_getStatsList"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appId "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" conf"),t("span",{attrs:{class:"token operator"}},[s._v("$")]),s._v("estat_token"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n                     searchWord "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"学校基本調査"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("# d2 %>%")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v('#   filter(stringr::str_detect(STATISTICS_NAME, "学校基本調査 平成２８年度 .+ 小学校"),')]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v('#          stringr::str_detect(TITLE, "指定都市等に所在する学校数"))')]),s._v("\n\ndf_school_child "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  estat_getStatsData"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("appId "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" conf"),t("span",{attrs:{class:"token operator"}},[s._v("$")]),s._v("estat_token"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                   statsDataId "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"0003180323"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## Fetching record 1-1320... (total: 1320 records)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("df_school_child\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## # A tibble: 1,320 x 11\n##    tab_code 表章項目 cat01_code `学校数・学級数・児童数・教職… cat02_code 設置者別\n##    <chr>    <chr>    <chr>      <chr>            <chr>      <chr>   \n##  1 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  2 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  3 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  4 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  5 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  6 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  7 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  8 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n##  9 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n## 10 0000000… 学校数・学級数… 010        学校数-計        00000      計      \n## # ... with 1,310 more rows, and 5 more variables: area_code <chr>,\n## #   政令指定都市別 <chr>, time_code <chr>, `時間軸（年次）` <chr>,\n## #   value <dbl>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# d <- ")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#   estat_getDataCatalog(appId = conf$estat_token, ")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v('#                      searchWord = "学校基本調査")')]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# d %>% ")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v('#   filter(stringr::str_detect(NAME, "指定都市等に所在する学校数"))')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"インタクティブに動かせるマップ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#インタクティブに動かせるマップ","aria-hidden":"true"}},[s._v("#")]),s._v(" インタクティブに動かせるマップ")]),s._v(" "),t("h3",{attrs:{id:"mapedit-mapview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mapedit-mapview","aria-hidden":"true"}},[s._v("#")]),s._v(" mapedit / mapview")]),s._v(" "),t("p",[s._v("QGISやArcGISのような高機能なGIS機能はありませんが、")]),s._v(" "),t("p",[s._v("地理空間データを閲覧したり、簡単なデータの作成・加工を行うのに十分な機能を備えています。")]),s._v(" "),t("p",[s._v("インタラクティブに扱うためのパッケージです。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("mapview()")]),s._v("を実行すると、leafletベースの画面が表示されます。これは興味のある対象へズームしたり表示する場所を変更したりといった操作が可能です。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-20-1.png",alt:"plot of chunk unnamed-chunk-20"}})]),s._v(" "),t("p",[s._v("しかし表示されているのはベースタイルの情報のみです。ここに用意した地理空間データをマッピングするには"),t("code",[s._v("mapview()")]),s._v("の引数にオブジェクトを渡して実行します。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stations"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-21-1.png",alt:"plot of chunk unnamed-chunk-21"}})]),s._v(" "),t("p",[s._v("全国の観測所の位置が地図上にマッピングされました。各ポイントのマーカーを選択すると、地物の属性情報を確認できます。また"),t("code",[s._v("zcol")]),s._v("引数に属性の名前を与えて、表示項目の塗り分けを行うことが可能です。次の例は、stationsデータの観測所の種類を記録したstation_typeの列を基準に地物の塗り分けを行うものです。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stations"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" zcol "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"station_type"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-22-1.png",alt:"plot of chunk unnamed-chunk-22"}})]),s._v(" "),t("p",[s._v("塗り分けを行っても、このデータはポイントの数が多すぎて詳細を把握することができません。しかしmapviewパッケージは静的な地図の描画ではなくて動的な地図を提供することを思い出してください。例えばもしあなたが北海道の観測所に興味がある場合、対象を拡大表示すれば良いのです。しかし、もし関心が北海道の観測所であることが初めから決まっているのであれば、表示するデータをあらかじめ北海道のものに限定しておくという処理が適切でしょう。")]),s._v(" "),t("p",[s._v("mapviewでは一般的なGISアプリケーションのように、レイヤーとして地理空間データを重ね合わせることができます。ここでは北海道内の観測所データと、北海道の行政区域データという2つのレイヤーを用意してその例を示します。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dplyr"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlibrary"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jpndistrict"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nsf_pref01 "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  jpn_pref"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"01"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" district "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("FALSE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nm "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  stations "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  dplyr"),t("span",{attrs:{class:"token operator"}},[s._v("::")]),s._v("filter"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pref_code "),t("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"01"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zcol "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"station_type"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" \n  mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-23-1.png",alt:"plot of chunk unnamed-chunk-23"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapedit"),t("span",{attrs:{class:"token operator"}},[s._v("::")]),s._v("drawFeatures"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("geometryを作成する")]),s._v(" "),t("li",[s._v("マーカーを配置する")]),s._v(" "),t("li",[s._v("編集（位置の修正）、削除")])]),s._v(" "),t("p",[s._v('作業を終えたら "Done" を押してアプリケーションを停止させましょう。アプリケーション上で作成したデータは'),t("code",[s._v(".Last.value")]),s._v("に保存されています。再利用のために名前つきのオブジェクトに代入しておきましょう。（ここに保存されるデータは新しい処理を実行すると上書きされるので注意です。）")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("my_features "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  .Last.value\n\nmy_features\n"),t("span",{attrs:{class:"token comment"}},[s._v("# Simple feature collection with 5 features and 3 fields")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# geometry type:  POINT")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# dimension:      XY")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# bbox:           xmin: 141.0315 ymin: 42.88402 xmax: 143.9648 ymax: 44.22874")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# epsg (SRID):    4326")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# proj4string:    +proj=longlat +datum=WGS84 +no_defs")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#   X_leaflet_id feature_type radius                  geometry")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 1          282       marker     NA POINT (143.9648 43.79404)")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 2          288       marker     NA POINT (142.1851 42.88401)")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 3          295       marker     NA POINT (142.1521 44.22874)")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 4          357 circlemarker     10 POINT (142.2015 43.71508)")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 5          373 circlemarker     10 POINT (141.0315 42.91553)")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("レイヤーの追加は、 "),t("code",[s._v("+ mapview()")]),s._v("の形式で実行します。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("station_point_pref01 "),t("span",{attrs:{class:"token operator"}},[s._v("<-")]),s._v(" \n  stations "),t("span",{attrs:{class:"token percent-operator operator"}},[s._v("%>%")]),s._v(" \n  dplyr"),t("span",{attrs:{class:"token operator"}},[s._v("::")]),s._v("filter"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pref_code "),t("span",{attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"01"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  list"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("station_point_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sf_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  zcol "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" list"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"station_type"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("NULL")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  legend "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" list"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token boolean"}},[s._v("TRUE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("FALSE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  homebutton "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" list"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token boolean"}},[s._v("FALSE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("TRUE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-26-1.png",alt:"plot of chunk unnamed-chunk-26"}})]),s._v(" "),t("p",[s._v("レイヤーの表示切り替え、ホーム位置への移動、全体表示（ズームレベルのリセット）")]),s._v(" "),t("p",[s._v("mapviewパッケージの機能について理解を深めるために、パッケージの実装面を学んでいきましょう。"),t("code",[s._v("mapview()")]),s._v("の返り値はS4クラスのオブジェクトです。object、mapという2つのスロットからなります。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("str"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" max.level "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("3")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('## Formal class \'mapview\' [package "mapview"] with 2 slots\n##   ..@ object:List of 2\n##   .. ..$ :sfc_POINT of length 228; first list element:  \'XY\' num [1:2] 141.9 45.5\n##   .. ..$ :sfc_MULTIPOLYGON of length 1; first list element: List of 239\n##   .. .. ..- attr(*, "class")= chr [1:3] "XY" "MULTIPOLYGON" "sfg"\n##   ..@ map   :List of 8\n##   .. ..$ x            :List of 4\n##   .. ..$ width        : NULL\n##   .. ..$ height       : NULL\n##   .. ..$ sizingPolicy :List of 6\n##   .. ..$ dependencies :List of 4\n##   .. ..$ elementId    : NULL\n##   .. ..$ preRenderHook:function (widget)  \n##   .. ..$ jsHooks      :List of 1\n##   .. ..- attr(*, "class")= chr [1:2] "leaflet" "htmlwidget"\n##   .. ..- attr(*, "package")= chr "leaflet"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("objectスロットにはマッピングに使われるデータが保存されています。")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("m"),t("span",{attrs:{class:"token operator"}},[s._v("@")]),s._v("object"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## Geometry set for 228 features \n## geometry type:  POINT\n## dimension:      XY\n## bbox:           xmin: 139.4167 ymin: 41.41667 xmax: 145.75 ymax: 45.51667\n## epsg (SRID):    4326\n## proj4string:    +proj=longlat +datum=WGS84 +no_defs\n## First 5 geometries:\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## POINT (141.9333 45.51667)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## POINT (141.6667 45.4)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## POINT (141.045 45.3)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## POINT (141.8 45.4)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## POINT (142.1667 45.33333)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"多様なオプション"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多様なオプション","aria-hidden":"true"}},[s._v("#")]),s._v(" 多様なオプション")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        col.regions "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"magenta"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-29-1.png",alt:"plot of chunk unnamed-chunk-29"}})]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("station_point_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        zcol "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"station_type"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        col.regions "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"orange"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"violet"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"blue"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"cyan"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        popup "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" popupTable"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("station_point_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                           zcol "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"station_name"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                    "),t("span",{attrs:{class:"token string"}},[s._v('"elevation"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                    "),t("span",{attrs:{class:"token string"}},[s._v('"address"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        legend "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("TRUE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        label "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("NULL")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        homebutton "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("TRUE")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-29-2.png",alt:"plot of chunk unnamed-chunk-29"}})]),s._v(" "),t("h4",{attrs:{id:"ベースマップの変更"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ベースマップの変更","aria-hidden":"true"}},[s._v("#")]),s._v(" ベースマップの変更")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# これらのタイルがベースマップとして利用可能")]),s._v("\nmapviewGetOption"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"basemaps"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('## [1] "CartoDB.Positron"   "CartoDB.DarkMatter" "OpenStreetMap"     \n## [4] "Esri.WorldImagery"  "OpenTopoMap"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# ref) https://leaflet-extras.github.io/leaflet-providers/preview/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("mapview"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" map.types "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"Esri.WorldImagery"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"images/unnamed-chunk-31-1.png",alt:"plot of chunk unnamed-chunk-31"}})]),s._v(" "),t("h4",{attrs:{id:"保存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保存","aria-hidden":"true"}},[s._v("#")]),s._v(" 保存")]),s._v(" "),t("p",[t("code",[s._v("mapview::mapshot()")]),s._v("を使います。これはwebshotパッケージのラッパーとして機能する関数です。")]),s._v(" "),t("h3",{attrs:{id:"deckgl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deckgl","aria-hidden":"true"}},[s._v("#")]),s._v(" deckgl")]),s._v(" "),t("p",[s._v("Uberが開発に携わるオープンソース")]),s._v(" "),t("p",[s._v("deck.gl")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mapdeck"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("# mapdeck::set_token()")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"plotly"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plotly","aria-hidden":"true"}},[s._v("#")]),s._v(" plotly")]),s._v(" "),t("p",[s._v("地図タイルを使わない")]),s._v(" "),t("p",[s._v("地図以外のグラフが描画できる")]),s._v(" "),t("p",[s._v("[WIP]")]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("plotly"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## Error in library(plotly): there is no package called 'plotly'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("plot_geo"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sf_pref01"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('## Error in plot_geo(sf_pref01): could not find function "plot_geo"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"アニメーショングラフ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#アニメーショングラフ","aria-hidden":"true"}},[s._v("#")]),s._v(" アニメーショングラフ")]),s._v(" "),t("ul",[t("li",[s._v("気象データ")]),s._v(" "),t("li",[s._v("人口データ、時系列?")])]),s._v(" "),t("div",{staticClass:"language-r line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-r"}},[t("code",[s._v("library"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gganimate"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}],!1,null,null,null);e.options.__file="spatial-data-mapping.md";a.default=e.exports}}]);