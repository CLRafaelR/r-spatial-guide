(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{148:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("p",[t._v("「地図」といえば紙媒体に印刷することを前提とした出力が一般的です。「地図」は現場で地物情報の状態や関係性を確認するために利用することが一般的です。しかし地図の情報量を増やすことは紙面を増やすことと同義であり、必要とする情報に応じて異なる地図を用意しなければなりません。")]),t._v(" "),a("p",[t._v("従来の紙地図に対して、コンピュータで見る地図（ここでは電子地図と呼びます。）は多くの点で異なります。地図を利用する人が興味・関心のある地物の情報を選別したり、縮尺を自在に変更したりといった操作が可能です。")]),t._v(" "),a("p",[t._v("ここではまず、Rの標準作図機能による地図の作成を行います。次にggplot2パッケージを使った例を紹介します。これらはいずれも印刷や画面上での表示に向いた静的な地図の作成方法です。次にウェブベースでのインタラクティブな操作が可能な空間データのマッピングについて学びます。")]),t._v(" "),a("p",[t._v("地図表現には表示媒体の違いだけでなく、興味のあるデータを表現するために多様な種類が提案されてきています。全てを扱うことはできませんが、いくつかの例を紹介します。")]),t._v(" "),a("p",[t._v("データ操作や処理を行うので、前章を先に読んでいてください。")]),t._v(" "),t._m(0),t._v(" "),a("p",[t._v("この章では")]),t._v(" "),t._m(1),t._v(" "),t._m(2),a("p",[t._v("岡山県の行政区域データを用意します。")]),t._v(" "),a("p",[t._v("また統計データとして、平成17年、22年、27年に行われた国勢調査による人口データを使います。このデータはe-statよりダウンロード可能です。")]),t._v(" "),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35),t._m(36),t._m(37),t._v(" "),a("blockquote",[a("p",[t._v("Error in grid.Call(C_textBounds, as.graphicsAnnot(x"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mi",[t._v("l")]),a("mi",[t._v("a")]),a("mi",[t._v("b")]),a("mi",[t._v("e")]),a("mi",[t._v("l")]),a("mo",[t._v(")")]),a("mo",{attrs:{separator:"true"}},[t._v(",")]),a("mi",[t._v("x")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("label), x")])],1)],1)],1),t._m(38)]),t._v("x, x$y,  :\npolygon edge not found")])]),t._v(" "),a("p",[t._v("というエラーがでることがあります。")]),t._v(" "),a("p",[t._v("何度か描画しているとエラーが発生せずに描画が行われます。")]),t._v(" "),t._m(39),t._v(" "),t._m(40),a("p",[t._v("空間データと統計データの紐付けは下記のように行います。まず、共通する「キー」と呼ばれる列を作ります。")]),t._v(" "),t._m(41),t._m(42),t._m(43),t._m(44),t._m(45),t._m(46),t._m(47),t._v(" "),a("p",[t._v("階級分け")]),t._v(" "),t._m(48),t._m(49),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._m(54),t._m(55),t._v(" "),t._m(56),t._m(57),t._v(" "),t._m(58),t._m(59),t._m(60),t._v(" "),t._m(61),t._m(62),t._v(" "),t._m(63),t._v(" "),t._m(64),a("p",[t._v("人口数のデータ")]),t._v(" "),a("p",[t._v("city_typeを元に47都道府県のデータに限定します。")]),t._v(" "),t._m(65),t._m(66),t._m(67),t._m(68),t._v(" "),t._m(69),t._m(70),a("p",[t._v("空間配置を考慮しない図")]),t._v(" "),t._m(71),t._m(72),t._v(" "),a("p",[t._v("geofacetを利用した図")]),t._v(" "),t._m(73),t._m(74),t._v(" "),t._m(75),t._v(" "),t._m(76),t._v(" "),a("p",[t._v("QGISやArcGISのような高機能なGIS機能はありませんが、")]),t._v(" "),a("p",[t._v("地理空間データを閲覧したり、簡単なデータの作成・加工を行うのに十分な機能を備えています。")]),t._v(" "),a("p",[t._v("インタラクティブに扱うためのパッケージです。")]),t._v(" "),t._m(77),t._m(78),t._v(" "),t._m(79),t._m(80),t._v(" "),t._m(81),t._v(" "),t._m(82),t._m(83),t._v(" "),t._m(84),a("p",[t._v("塗り分けを行っても、このデータはポイントの数が多すぎて詳細を把握することができません。しかしmapviewパッケージは静的な地図の描画ではなくて動的な地図を提供することを思い出してください。例えばもしあなたが北海道の観測所に興味がある場合、対象を拡大表示すれば良いのです。しかし、もし関心が北海道の観測所であることが初めから決まっているのであれば、表示するデータをあらかじめ北海道のものに限定しておくという処理が適切でしょう。")]),t._v(" "),a("p",[t._v("mapviewでは一般的なGISアプリケーションのように、レイヤーとして地理空間データを重ね合わせることができます。ここでは北海道内の観測所データと、北海道の行政区域データという2つのレイヤーを用意してその例を示します。")]),t._v(" "),t._m(85),t._m(86),t._v(" "),t._m(87),t._m(88),t._v(" "),t._m(89),t._v(" "),t._m(90),t._m(91),t._v(" "),t._m(92),t._m(93),t._v(" "),a("p",[t._v("レイヤーの表示切り替え、ホーム位置への移動、全体表示（ズームレベルのリセット）")]),t._v(" "),t._m(94),t._v(" "),t._m(95),t._m(96),a("p",[t._v("objectスロットにはマッピングに使われるデータが保存されています。")]),t._v(" "),t._m(97),t._m(98),t._m(99),t._m(100),t._m(101),t._m(102),t._m(103),t._m(104),t._v(" "),t._m(105),t._m(106),t._v(" "),t._m(107),t._m(108),t._m(109),t._m(110),t._m(111),t._v(" "),t._m(112),t._v(" "),t._m(113),t._v(" "),a("p",[t._v("Uberが開発に携わるオープンソース")]),t._v(" "),a("p",[t._v("deck.gl")]),t._v(" "),t._m(114),t._m(115),t._v(" "),a("p",[t._v("地図タイルを使わない")]),t._v(" "),a("p",[t._v("地図以外のグラフが描画できる")]),t._v(" "),a("p",[t._v("[WIP]")]),t._v(" "),t._m(116),t._m(117),t._v(" "),t._m(118),t._v(" "),t._m(119)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"利用するデータ、パッケージ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用するデータ、パッケージ","aria-hidden":"true"}},[this._v("#")]),this._v(" 利用するデータ、パッケージ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("国土数値情報の行政区域データ")]),this._v(" "),s("li",[this._v("e-Statで公開される都道府県・市区町村別統計表 (2005(H17)、2010(H22)、2015(H27))より人口数のデータ")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("library"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlibrary"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dplyr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlibrary"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ggplot2"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlibrary"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("patchwork"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("library"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jpndistrict"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsf_pref33 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  jpn_pref"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("33")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" district "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndf_h17to27_pops "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  readr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("read_rds"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("here"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("here"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"data-raw"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"population_h17-h22.rds"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("glimpse"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("sf_pref33"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('## Observations: 30\n## Variables: 5\n## $ pref_code  <chr> "33", "33", "33", "33", "33", "33", "33", "33", "33...\n## $ prefecture <chr> "岡山県", "岡山県", "岡山県", "岡山県", "岡山県", "岡山県", "岡山県", "岡...\n## $ city_code  <chr> "33101", "33102", "33103", "33104", "33202", "33203...\n## $ city       <chr> "岡山市 北区", "岡山市 中区", "岡山市 東区", "岡山市 南区", "倉敷市", "津山市...\n## $ geometry   <GEOMETRY [°]> POLYGON ((133.9098 34.948, ..., MULTIPOLYG...\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("glimpse"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("df_h17to27_pops"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('## Observations: 6,363\n## Variables: 6\n## $ year       <dbl> 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 200...\n## $ pref_code  <chr> "00", "01", "01", "01", "01", "01", "01", "01", "01...\n## $ city_code  <chr> "00000", "01000", "01100", "01101", "01102", "01103...\n## $ city_type  <chr> "a", "a", "1", "0", "0", "0", "0", "0", "0", "0", "...\n## $ city       <chr> "全国", "北海道", "札幌市", "札幌市 中央区", "札幌市 北区", "札幌市 東区", ...\n## $ population <dbl> 127767994, 5627737, 1880863, 202801, 272877, 253996...\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"base"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#base","aria-hidden":"true"}},[this._v("#")]),this._v(" base")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("plot"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("sf_pref33"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-6-1.png",alt:"plot of chunk unnamed-chunk-6"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("sfオブジェクトに対して"),s("code",[this._v("plot()")]),this._v("を適用した場合、デフォルトでは全ての属性について作図を行います。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("そのため、地物の形状あるいは特定の属性について確認したい際には次のようにします。"),s("code",[this._v("[")]),this._v("演算子で対象の属性を含む列を指定するか、"),s("code",[this._v("st_geometry()")]),this._v("を使います。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("sf_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  st_geometry"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("col "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"white"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-7-1.png",alt:"plot of chunk unnamed-chunk-7"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("options(sf_max.plot =)")]),this._v("で描画される数を制御することも可能です。これによりセッションが終了するまで設定を維持できます。ただし、この設定が予期せぬ結果を招くこともあるので、描画対象は都度指定するようにした方が良いでしょう。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("options"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_max.plot "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsf_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-8-1.png",alt:"plot of chunk unnamed-chunk-8"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"city"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-9-1.png",alt:"plot of chunk unnamed-chunk-9"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ここで日本語が文字化けする時には"),s("code",[this._v("par()")]),this._v("による作図パラメータの調整を行う必要があります。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("par"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("family "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"IPAexGothic"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    oma "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("6.5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    mar "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"city"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-10-1.png",alt:"plot of chunk unnamed-chunk-10"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("凡例は標準で図の右側に配置されますが、これは"),s("code",[this._v("key.pos")]),this._v("引数で位置を調整できます。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 1は下部、2は右側、3は上部、4は右側")]),t._v("\nsf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"city"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key.pos "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-11-1.png",alt:"plot of chunk unnamed-chunk-11"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ggplot2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ggplot2","aria-hidden":"true"}},[this._v("#")]),this._v(" ggplot2")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ggplot2にはsfパッケージが扱う地理空間オブジェクトを描画する専用の関数が用意されています。"),s("code",[this._v("geom_sf()")]),this._v("は引数"),s("code",[this._v("data")]),this._v("にsf、sfc、sfgを与えることで、地物の描画を行います。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("x "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" st_point"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-12-1.png",alt:"plot of chunk unnamed-chunk-12"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("# 経緯度線を描画しない")]),t._v("\n  coord_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datum "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("NA")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  guides"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("# 背景色を白にする")]),t._v("\n  theme_void"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-13-1.png",alt:"plot of chunk unnamed-chunk-13"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("geom_sf()")]),t._v("では凡例の出力を調整するための引数"),a("code",[t._v("show.legend")]),t._v("が用意されています。この凡例では、既定値に"),a("code",[t._v("NA")]),t._v("が与えられていますが、"),a("code",[t._v("aes()")]),t._v('でマッピングを指定した場合、凡例が与えられます。またこの時の凡例は"polygon"ですが、"line"または"point"と明示的に指定することが可能です。')])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("sf_kitaku "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"geometry"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  st_cast"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"MULTILINESTRING"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  st_cast"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"LINESTRING"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" letters"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 凡例を描画しない")]),t._v("\np1 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf_kitaku"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("col "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  show.legend "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 凡例を描画する (polygonとして扱われる)")]),t._v("\np2 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf_kitaku"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("col "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 凡例を描画する (種類を指定する)")]),t._v("\np3 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf_kitaku"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("col "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  show.legend "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"line"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\np1 "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" p2 "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" p3 "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" \n  plot_layout"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ncol "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-14-1.png",alt:"plot of chunk unnamed-chunk-14"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("set.seed"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("123")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"white"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n            sf_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n            st_sample"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n            st_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" letters"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("seq"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          show.legend "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"point"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  guides"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## although coordinates are longitude/latitude, st_intersects assumes that they are planar\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-15-1.png",alt:"plot of chunk unnamed-chunk-15"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.75em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),a("span",{staticClass:"mord mathit"},[t._v("a")]),a("span",{staticClass:"mord mathit"},[t._v("b")]),a("span",{staticClass:"mord mathit"},[t._v("e")]),a("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),a("span",{staticClass:"mclose"},[t._v(")")]),a("span",{staticClass:"mpunct"},[t._v(",")]),a("span",{staticClass:"mord mathit"},[t._v("x")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"facet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#facet","aria-hidden":"true"}},[this._v("#")]),this._v(" facet")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("df_pops_pref33 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  df_h17to27_pops "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"全国"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pref_code "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" city_type "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%in%")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("sf_pref33 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  sf_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city_code "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" if_else"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stringr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("str_detect"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"[[:space:]].+区$"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                             stringr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("str_replace"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('".{1}$"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                             city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         city "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" stringr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("str_remove"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"[[:space:]].+区$"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         city "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" stringr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("str_remove"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^.+郡[[:space:]]"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  group_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" city"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  tidyr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("nest"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("city_union "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  x "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    lwgeom"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("st_make_valid"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    sf"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("st_union"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("by_feature "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    sf"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("st_transform"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("crs "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("4326")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    sf"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("st_cast"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"POLYGON"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    purrr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("map"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" .x"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    sf"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("st_multipolygon"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n    sf"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("st_sfc"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("crs "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("4326")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nsf_pref33 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  sf_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  transmute"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            city"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            geometry "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" purrr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("map"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" city_union"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n              purrr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("reduce"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  st_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 合併により統合された町")]),t._v("\ndf_pops_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  anti_join"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" by "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"city_code"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                              "),a("span",{attrs:{class:"token string"}},[t._v('"city"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("## # A tibble: 7 x 6\n##    year pref_code city_code city_type city   population\n##   <dbl> <chr>     <chr>     <chr>     <chr>       <dbl>\n## 1  2005 33        33201     2         岡山市     674746\n## 2  2005 33        33303     3         建部町       6524\n## 3  2005 33        33321     3         瀬戸町      14902\n## 4  2005 33        33345     3         佐伯町       3931\n## 5  2005 33        33442     3         金光町      12341\n## 6  2005 33        33443     3         鴨方町      18475\n## 7  2005 33        33444     3         寄島町       6511\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 市町村合併による結果を適用。人口数を再計算")]),t._v("\ndf_pops_pref33 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  df_pops_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city_code "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" recode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33201")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33100"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33303")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33100"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33321")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33100"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33345")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33346"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33442")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33216"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33443")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33216"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    `"),a("span",{attrs:{class:"token number"}},[t._v("33444")]),t._v("` "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"33216"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  group_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" city_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("population "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sum"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("population"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  ungroup"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndf_pops_pref33 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  sf_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  inner_join"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("df_pops_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" by "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"city_code"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                       "),a("span",{attrs:{class:"token string"}},[t._v('"city"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" df_pops_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" population"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  scale_fill_viridis_c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  facet_wrap"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" year"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-21-1.png",alt:"plot of chunk unnamed-chunk-21"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("df_pops_pref33_cls "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  df_pops_pref33 "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  group_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" dplyr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("ntile"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("population"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("9")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  ungroup"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" df_pops_pref33_cls"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n          aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" population"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n          color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"white"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  scale_fill_viridis_c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("guide "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" guide_legend"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Population"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  facet_wrap"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" year"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-22-1.png",alt:"plot of chunk unnamed-chunk-22"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_sf"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" df_pops_pref33_cls"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fill "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" as.character"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"white"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  scale_fill_viridis_d"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("guide "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" guide_legend"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Class"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                            reverse "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  theme_light"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  facet_wrap"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" year"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-23-1.png",alt:"plot of chunk unnamed-chunk-23"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"tmapによる主題図作成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tmapによる主題図作成","aria-hidden":"true"}},[this._v("#")]),this._v(" tmapによる主題図作成")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("library"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("tmap"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("qtm"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("sf_pref33"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-25-1.png",alt:"plot of chunk unnamed-chunk-25"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("tm_shape"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n         projection "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"longlat"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" \n    tm_polygons"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-26-1.png",alt:"plot of chunk unnamed-chunk-26"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("tmap_mode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"view"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntm_shape"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" \n  tm_fill"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"city_code"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" palette "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf.colors"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("qtm"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("sf_pref33"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-28-1.png",alt:"plot of chunk unnamed-chunk-28"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("tm_shape"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref33"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  tm_polygons"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"city"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n              bg.color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"white"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n              border.col "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"gray50"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n              border.alpha "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v(".5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              bg.alpha "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.25")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              outer.margins "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("0.1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  tm_legend"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("position "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"right"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"bottom"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            inner.margins "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("0.1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.05")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.01")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.05")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  tm_layout"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frame "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"岡山県"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            fontfamily "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"IPAexGothic"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-28-2.png",alt:"plot of chunk unnamed-chunk-28"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"geofacetによる空間位置関係を考慮したグラフ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#geofacetによる空間位置関係を考慮したグラフ","aria-hidden":"true"}},[this._v("#")]),this._v(" geofacetによる空間位置関係を考慮したグラフ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("library"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("geofacet"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("df_h17to27_pops_target "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v("\n  df_h17to27_pops "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"全国"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("city_type "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"a"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 各県のデータが3回の調査回数分あることを確認")]),t._v("\ndf_h17to27_pops_target "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  count"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pref_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("between"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## # A tibble: 0 x 2\n## # ... with 2 variables: pref_code <chr>, n <int>\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("元のデータにありますが、前回の調査時からの増減を示す列 ("),s("code",[this._v("increase")]),this._v("... "),s("code",[this._v("TRUE")]),this._v("である場合に増加を示す) を作成します。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("df_h17to27_pops_target "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v("\n  df_h17to27_pops_target "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  arrange"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pref_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" year"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  group_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pref_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("increace "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" if_else"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("population "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" lag"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("population"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  ungroup"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  arrange"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pref_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mutate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" rep"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jp_prefs_grid1"),a("span",{attrs:{class:"token operator"}},[t._v("$")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("p_base "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  df_h17to27_pops_target "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  ggplot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" population"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_point"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aes"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" increace"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  scale_color_manual"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("values "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"TRUE"')]),t._v("  "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" viridisLite"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("viridis"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                "),a("span",{attrs:{class:"token string"}},[t._v('"FALSE"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" viridisLite"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("viridis"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                     na.value "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"gray"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_line"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"gray"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  guides"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" guide_legend"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"人口の増加"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  scale_x_continuous"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("breaks "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2005")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2010")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2015")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  scale_y_continuous"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labels "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" scales"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("comma"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                     breaks "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("500000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1500000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3000000")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  theme_light"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  theme"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("legend.position "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"top"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        legend.direction "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"horizontal"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        axis.text    "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" element_text"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("5.2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        strip.text.x "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" element_text"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("7.6")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("p_base "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  facet_wrap"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" pref_code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n             scales "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"free_y"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-34-1.png",alt:"plot of chunk unnamed-chunk-34"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("p_base "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" \n  facet_geo"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            grid "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"jp_prefs_grid1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            scales "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"free_y"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-35-1.png",alt:"plot of chunk unnamed-chunk-35"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"インタクティブに動かせるマップ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#インタクティブに動かせるマップ","aria-hidden":"true"}},[this._v("#")]),this._v(" インタクティブに動かせるマップ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"mapedit-mapview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapedit-mapview","aria-hidden":"true"}},[this._v("#")]),this._v(" mapedit / mapview")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("library"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("mapview"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("mapview()")]),this._v("を実行すると、leafletベースの画面が表示されます。これは興味のある対象へズームしたり表示する場所を変更したりといった操作が可能です。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("mapview"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-37-1.png",alt:"plot of chunk unnamed-chunk-37"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("しかし表示されているのはベースタイルの情報のみです。ここに用意した地理空間データをマッピングするには"),s("code",[this._v("mapview()")]),this._v("の引数にオブジェクトを渡して実行します。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("mapview"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("stations"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("全国の観測所の位置が地図上にマッピングされました。各ポイントのマーカーを選択すると、地物の属性情報を確認できます。また"),s("code",[this._v("zcol")]),this._v("引数に属性の名前を与えて、表示項目の塗り分けを行うことが可能です。次の例は、stationsデータの観測所の種類を記録したstation_typeの列を基準に地物の塗り分けを行うものです。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("mapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stations"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" zcol "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"station_type"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("library"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dplyr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlibrary"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jpndistrict"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsf_pref01 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  jpn_pref"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" district "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nm "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  stations "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  dplyr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pref_code "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  mapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zcol "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"station_type"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" \n  mapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nm\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-40-1.png",alt:"plot of chunk unnamed-chunk-40"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("mapedit"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("drawFeatures"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("geometryを作成する")]),this._v(" "),s("li",[this._v("マーカーを配置する")]),this._v(" "),s("li",[this._v("編集（位置の修正）、削除")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v('作業を終えたら "Done" を押してアプリケーションを停止させましょう。アプリケーション上で作成したデータは'),s("code",[this._v(".Last.value")]),this._v("に保存されています。再利用のために名前つきのオブジェクトに代入しておきましょう。（ここに保存されるデータは新しい処理を実行すると上書きされるので注意です。）")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("my_features "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  .Last.value\n\nmy_features\n"),a("span",{attrs:{class:"token comment"}},[t._v("# Simple feature collection with 5 features and 3 fields")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# geometry type:  POINT")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# dimension:      XY")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# bbox:           xmin: 141.0315 ymin: 42.88402 xmax: 143.9648 ymax: 44.22874")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# epsg (SRID):    4326")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# proj4string:    +proj=longlat +datum=WGS84 +no_defs")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("#   X_leaflet_id feature_type radius                  geometry")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 1          282       marker     NA POINT (143.9648 43.79404)")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 2          288       marker     NA POINT (142.1851 42.88401)")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 3          295       marker     NA POINT (142.1521 44.22874)")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 4          357 circlemarker     10 POINT (142.2015 43.71508)")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 5          373 circlemarker     10 POINT (141.0315 42.91553)")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("レイヤーの追加は、 "),s("code",[this._v("+ mapview()")]),this._v("の形式で実行します。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("station_point_pref01 "),a("span",{attrs:{class:"token operator"}},[t._v("<-")]),t._v(" \n  stations "),a("span",{attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v(" \n  dplyr"),a("span",{attrs:{class:"token operator"}},[t._v("::")]),t._v("filter"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pref_code "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"01"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  list"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("station_point_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sf_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  zcol "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"station_type"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  legend "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  homebutton "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"images/unnamed-chunk-43-1.png",alt:"plot of chunk unnamed-chunk-43"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("mapviewパッケージの機能について理解を深めるために、パッケージの実装面を学んでいきましょう。"),s("code",[this._v("mapview()")]),this._v("の返り値はS4クラスのオブジェクトです。object、mapという2つのスロットからなります。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("str"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max.level "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('## Formal class \'mapview\' [package "mapview"] with 2 slots\n##   ..@ object:List of 2\n##   .. ..$ :sfc_POINT of length 228; first list element:  \'XY\' num [1:2] 141.9 45.5\n##   .. ..$ :sfc_MULTIPOLYGON of length 1; first list element: List of 239\n##   .. .. ..- attr(*, "class")= chr [1:3] "XY" "MULTIPOLYGON" "sfg"\n##   ..@ map   :List of 8\n##   .. ..$ x            :List of 4\n##   .. ..$ width        : NULL\n##   .. ..$ height       : NULL\n##   .. ..$ sizingPolicy :List of 6\n##   .. ..$ dependencies :List of 4\n##   .. ..$ elementId    : NULL\n##   .. ..$ preRenderHook:function (widget)  \n##   .. ..$ jsHooks      :List of 1\n##   .. ..- attr(*, "class")= chr [1:2] "leaflet" "htmlwidget"\n##   .. ..- attr(*, "package")= chr "leaflet"\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("m"),a("span",{attrs:{class:"token operator"}},[t._v("@")]),t._v("object"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("## Geometry set for 228 features \n## geometry type:  POINT\n## dimension:      XY\n## bbox:           xmin: 139.4167 ymin: 41.41667 xmax: 145.75 ymax: 45.51667\n## epsg (SRID):    4326\n## proj4string:    +proj=longlat +datum=WGS84 +no_defs\n## First 5 geometries:\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## POINT (141.9333 45.51667)\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## POINT (141.6667 45.4)\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## POINT (141.045 45.3)\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## POINT (141.8 45.4)\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("## POINT (142.1667 45.33333)\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"多様なオプション"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多様なオプション","aria-hidden":"true"}},[this._v("#")]),this._v(" 多様なオプション")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("mapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        col.regions "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"magenta"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("station_point_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        zcol "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"station_type"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        col.regions "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"orange"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"violet"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"blue"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"cyan"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        popup "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" popupTable"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("station_point_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                           zcol "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"station_name"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    "),a("span",{attrs:{class:"token string"}},[t._v('"elevation"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    "),a("span",{attrs:{class:"token string"}},[t._v('"address"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        legend "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        label "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        homebutton "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"ベースマップの変更"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ベースマップの変更","aria-hidden":"true"}},[this._v("#")]),this._v(" ベースマップの変更")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# これらのタイルがベースマップとして利用可能")]),t._v("\nmapviewGetOption"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"basemaps"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('## [1] "CartoDB.Positron"   "CartoDB.DarkMatter" "OpenStreetMap"     \n## [4] "Esri.WorldImagery"  "OpenTopoMap"\n')])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[s("span",{attrs:{class:"token comment"}},[this._v("# ref) https://leaflet-extras.github.io/leaflet-providers/preview/")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("mapview"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map.types "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Esri.WorldImagery"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"保存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#保存","aria-hidden":"true"}},[this._v("#")]),this._v(" 保存")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("mapview::mapshot()")]),this._v("を使います。これはwebshotパッケージのラッパーとして機能する関数です。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"deckgl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deckgl","aria-hidden":"true"}},[this._v("#")]),this._v(" deckgl")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("library"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mapdeck"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# mapdeck::set_token()")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"plotly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plotly","aria-hidden":"true"}},[this._v("#")]),this._v(" plotly")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-r line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("library"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plotly"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nplot_geo"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sf_pref01"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"アニメーショングラフ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#アニメーショングラフ","aria-hidden":"true"}},[this._v("#")]),this._v(" アニメーショングラフ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("気象データ")]),this._v(" "),s("li",[this._v("人口データ、時系列?")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-r line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-r"}},[s("code",[this._v("library"),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("gganimate"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])}],!1,null,null,null);e.options.__file="spatial-data-mapping.md";s.default=e.exports}}]);